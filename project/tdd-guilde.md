Based on comprehensive research for your Rakuten Symphony authentication project, here's a complete TDD guide tailored to your tech stack:

# Test-Driven Development Guide for Rakuten Symphony Auth Project

## Overview: TDD Strategy for Authentication App

This guide provides a comprehensive TDD approach for building your authentication application with **Golang (Ginkgo/Gomega)** backend and **React TypeScript (Jest + React Testing Library)** frontend.

---

## Part 1: Backend TDD with Ginkgo & Gomega

## Why Ginkgo + Gomega?

 **Ginkgo** :[browserstack**+1**](https://www.browserstack.com/guide/ginkgo-testing-framework)

* ✅  **BDD-style** : Expressive test syntax (`Describe`, `Context`, `It`, `BeforeEach`)
* ✅  **Table-driven tests** : `DescribeTable` for testing multiple scenarios
* ✅  **Parallel execution** : Built-in parallelism for speed
* ✅  **Rich CLI** : Focus tests, randomization, debugging flags
* ✅  **Kubernetes standard** : Used by Kubernetes project itself[github](https://github.com/kubernetes-sigs/kubebuilder/issues/4424)

 **Gomega** :[browserstack](https://www.browserstack.com/guide/ginkgo-testing-framework)

* ✅  **Powerful matchers** : `Expect().To(BeTrue())`, `Eventually()`, `Consistently()`
* ✅  **Readable assertions** : Natural language style
* ✅  **Async support** : `Eventually()` for testing timeouts, retries

---

## Setup Ginkgo & Gomega

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token"># Install dependencies</span><span>
</span></span><span><span></span><span class="token token">cd</span><span> backend
</span></span><span>go get -u github.com/onsi/ginkgo/v2/ginkgo
</span><span><span>go get -u github.com/onsi/gomega/</span><span class="token token punctuation">..</span><span>.
</span></span><span>
</span><span><span></span><span class="token token"># Bootstrap Ginkgo test suite</span><span>
</span></span><span>ginkgo bootstrap
</span><span>
</span><span><span></span><span class="token token"># Generate test file for a package</span><span>
</span></span><span>ginkgo generate auth_service
</span><span></span></code></span></div></div></div></pre>

 **Project Structure** :

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span><code><span><span>backend/
</span></span><span>├── internal/
</span><span>│   ├── service/
</span><span>│   │   ├── auth_service.go
</span><span>│   │   └── auth_service_test.go          # Ginkgo tests
</span><span>│   ├── repository/
</span><span>│   │   ├── user_repository.go
</span><span>│   │   └── user_repository_test.go       # Ginkgo tests
</span><span>│   └── api/
</span><span>│       ├── handlers/
</span><span>│       │   ├── auth_handler.go
</span><span>│       │   └── auth_handler_test.go      # Ginkgo tests (integration)
</span><span>├── pkg/
</span><span>│   ├── password/
</span><span>│   │   ├── hash.go
</span><span>│   │   └── hash_test.go                  # Ginkgo tests
</span><span>└── suite_test.go                         # Test suite entry point
</span><span></span></code></span></div></div></div></pre>

---

## TDD Workflow: Red-Green-Refactor

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">text</div></div><div><span><code><span><span>┌─────────────────────────────────────────────────────────┐
</span></span><span>│  STEP 1: Write Failing Test (RED)                      │
</span><span>│  Define expected behavior before implementation         │
</span><span>└─────────────────────────────────────────────────────────┘
</span><span>                        ↓
</span><span>┌─────────────────────────────────────────────────────────┐
</span><span>│  STEP 2: Run Test - Watch It Fail                      │
</span><span>│  ginkgo -v                                              │
</span><span>│  Confirms test is valid                                 │
</span><span>└─────────────────────────────────────────────────────────┘
</span><span>                        ↓
</span><span>┌─────────────────────────────────────────────────────────┐
</span><span>│  STEP 3: Write Minimum Code to Pass (GREEN)            │
</span><span>│  Implement just enough to make test pass                │
</span><span>└─────────────────────────────────────────────────────────┘
</span><span>                        ↓
</span><span>┌─────────────────────────────────────────────────────────┐
</span><span>│  STEP 4: Run Test - Watch It Pass                      │
</span><span>│  ginkgo -v                                              │
</span><span>└─────────────────────────────────────────────────────────┘
</span><span>                        ↓
</span><span>┌─────────────────────────────────────────────────────────┐
</span><span>│  STEP 5: Refactor (REFACTOR)                           │
</span><span>│  Improve code quality, DRY, readability                 │
</span><span>│  Tests ensure no regression                             │
</span><span>└─────────────────────────────────────────────────────────┘
</span><span>                        ↓
</span><span>                    Repeat
</span><span></span></code></span></div></div></div></pre>

---

## Example 1: Password Hashing (Unit Test)

**TDD Cycle for `pkg/password/hash.go`**

## Step 1: Write Failing Test

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// pkg/password/hash_test.go</span><span>
</span></span><span><span></span><span class="token token">package</span><span> password_test
</span></span><span>
</span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/ginkgo/v2"</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/gomega"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/pkg/password"</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">var</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">=</span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"Password Hashing"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"HashPassword"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"when given a valid password"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return a hashed password"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                plaintext </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span>              
</span><span><span>                hash</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>hash</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">BeEmpty</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>hash</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span></span><span class="token token">// Hash != plaintext</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>          
</span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should generate different hashes for same password"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                plaintext </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span>              
</span><span><span>                hash1</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span>
</span></span><span><span>                hash2</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Different salts = different hashes</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>hash1</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>hash2</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"VerifyPassword"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"when password matches hash"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return true"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                plaintext </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span><span>                hash</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span>                isValid</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">VerifyPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">,</span><span> hash</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>isValid</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">BeTrue</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"when password does not match hash"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return false"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                plaintext </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span><span>                wrongPassword </span><span class="token token operator">:=</span><span></span><span class="token token">"WrongPass456!"</span><span>
</span></span><span><span>                hash</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>plaintext</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span>                isValid</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">VerifyPassword</span><span class="token token punctuation">(</span><span>wrongPassword</span><span class="token token punctuation">,</span><span> hash</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>isValid</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">BeFalse</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 2: Run Test (RED)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token">cd</span><span> backend
</span></span><span>ginkgo -v pkg/password
</span><span>
</span><span><span></span><span class="token token"># Output: FAIL (functions don't exist yet)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 3: Write Implementation (GREEN)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// pkg/password/hash.go</span><span>
</span></span><span><span></span><span class="token token">package</span><span> password
</span></span><span>
</span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token">"crypto/rand"</span><span>
</span></span><span><span></span><span class="token token">"encoding/base64"</span><span>
</span></span><span><span></span><span class="token token">"errors"</span><span>
</span></span><span><span></span><span class="token token">"fmt"</span><span>
</span></span><span><span></span><span class="token token">"strings"</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">"golang.org/x/crypto/argon2"</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">const</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span>    Memory      </span><span class="token token operator">=</span><span></span><span class="token token">64</span><span></span><span class="token token operator">*</span><span></span><span class="token token">1024</span><span>
</span></span><span><span>    Iterations  </span><span class="token token operator">=</span><span></span><span class="token token">3</span><span>
</span></span><span><span>    Parallelism </span><span class="token token operator">=</span><span></span><span class="token token">2</span><span>
</span></span><span><span>    SaltLength  </span><span class="token token operator">=</span><span></span><span class="token token">16</span><span>
</span></span><span><span>    KeyLength   </span><span class="token token operator">=</span><span></span><span class="token token">32</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>password </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">(</span><span class="token token">string</span><span class="token token punctuation">,</span><span></span><span class="token token">error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    salt </span><span class="token token operator">:=</span><span></span><span class="token token">make</span><span class="token token punctuation">(</span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span class="token token">byte</span><span class="token token punctuation">,</span><span> SaltLength</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> rand</span><span class="token token punctuation">.</span><span class="token token">Read</span><span class="token token punctuation">(</span><span>salt</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span>    hash </span><span class="token token operator">:=</span><span> argon2</span><span class="token token punctuation">.</span><span class="token token">IDKey</span><span class="token token punctuation">(</span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span class="token token">byte</span><span class="token token punctuation">(</span><span>password</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> salt</span><span class="token token punctuation">,</span><span> Iterations</span><span class="token token punctuation">,</span><span> Memory</span><span class="token token punctuation">,</span><span> Parallelism</span><span class="token token punctuation">,</span><span> KeyLength</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span>    b64Salt </span><span class="token token operator">:=</span><span> base64</span><span class="token token punctuation">.</span><span>RawStdEncoding</span><span class="token token punctuation">.</span><span class="token token">EncodeToString</span><span class="token token punctuation">(</span><span>salt</span><span class="token token punctuation">)</span><span>
</span></span><span><span>    b64Hash </span><span class="token token operator">:=</span><span> base64</span><span class="token token punctuation">.</span><span>RawStdEncoding</span><span class="token token punctuation">.</span><span class="token token">EncodeToString</span><span class="token token punctuation">(</span><span>hash</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span>    encoded </span><span class="token token operator">:=</span><span> fmt</span><span class="token token punctuation">.</span><span class="token token">Sprintf</span><span class="token token punctuation">(</span><span class="token token">"$argon2id$v=%d$m=%d,t=%d,p=%d$%s$%s"</span><span class="token token punctuation">,</span><span>
</span></span><span><span>        argon2</span><span class="token token punctuation">.</span><span>Version</span><span class="token token punctuation">,</span><span> Memory</span><span class="token token punctuation">,</span><span> Iterations</span><span class="token token punctuation">,</span><span> Parallelism</span><span class="token token punctuation">,</span><span> b64Salt</span><span class="token token punctuation">,</span><span> b64Hash</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">return</span><span> encoded</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token">VerifyPassword</span><span class="token token punctuation">(</span><span>password</span><span class="token token punctuation">,</span><span> encodedHash </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">(</span><span class="token token">bool</span><span class="token token punctuation">,</span><span></span><span class="token token">error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    parts </span><span class="token token operator">:=</span><span> strings</span><span class="token token punctuation">.</span><span class="token token">Split</span><span class="token token punctuation">(</span><span>encodedHash</span><span class="token token punctuation">,</span><span></span><span class="token token">"$"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span></span><span class="token token">len</span><span class="token token punctuation">(</span><span>parts</span><span class="token token punctuation">)</span><span></span><span class="token token operator">!=</span><span></span><span class="token token">6</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span> errors</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token">"invalid hash format"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">var</span><span> memory</span><span class="token token punctuation">,</span><span> iterations </span><span class="token token">uint32</span><span>
</span></span><span><span></span><span class="token token">var</span><span> parallelism </span><span class="token token">uint8</span><span>
</span></span><span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> fmt</span><span class="token token punctuation">.</span><span class="token token">Sscanf</span><span class="token token punctuation">(</span><span>parts</span><span class="token token punctuation">[</span><span class="token token">3</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span></span><span class="token token">"m=%d,t=%d,p=%d"</span><span class="token token punctuation">,</span><span></span><span class="token token operator">&</span><span>memory</span><span class="token token punctuation">,</span><span></span><span class="token token operator">&</span><span>iterations</span><span class="token token punctuation">,</span><span></span><span class="token token operator">&</span><span>parallelism</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span>    salt</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> base64</span><span class="token token punctuation">.</span><span>RawStdEncoding</span><span class="token token punctuation">.</span><span class="token token">DecodeString</span><span class="token token punctuation">(</span><span>parts</span><span class="token token punctuation">[</span><span class="token token">4</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span>    hash</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> base64</span><span class="token token punctuation">.</span><span>RawStdEncoding</span><span class="token token punctuation">.</span><span class="token token">DecodeString</span><span class="token token punctuation">(</span><span>parts</span><span class="token token punctuation">[</span><span class="token token">5</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span>    compareHash </span><span class="token token operator">:=</span><span> argon2</span><span class="token token punctuation">.</span><span class="token token">IDKey</span><span class="token token punctuation">(</span><span class="token token punctuation">[</span><span class="token token punctuation">]</span><span class="token token">byte</span><span class="token token punctuation">(</span><span>password</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span> salt</span><span class="token token punctuation">,</span><span> iterations</span><span class="token token punctuation">,</span><span> memory</span><span class="token token punctuation">,</span><span> parallelism</span><span class="token token punctuation">,</span><span></span><span class="token token">uint32</span><span class="token token punctuation">(</span><span class="token token">len</span><span class="token token punctuation">(</span><span>hash</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">return</span><span> subtle</span><span class="token token punctuation">.</span><span class="token token">ConstantTimeCompare</span><span class="token token punctuation">(</span><span>hash</span><span class="token token punctuation">,</span><span> compareHash</span><span class="token token punctuation">)</span><span></span><span class="token token operator">==</span><span></span><span class="token token">1</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 4: Run Test (GREEN)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span>ginkgo -v pkg/password
</span></span><span>
</span><span><span></span><span class="token token"># Output: PASS</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 5: Refactor

* Extract constants to config
* Add input validation
* Add benchmarks

---

## Example 2: Auth Service (Unit Test with Mocks)

## Step 1: Write Failing Test

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// internal/service/auth_service_test.go</span><span>
</span></span><span><span></span><span class="token token">package</span><span> service_test
</span></span><span>
</span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token">"errors"</span><span>
</span></span><span>  
</span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/ginkgo/v2"</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/gomega"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/internal/models"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/internal/service"</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">// Mock repository</span><span>
</span></span><span><span></span><span class="token token">type</span><span> MockUserRepository </span><span class="token token">struct</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    users </span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token punctuation">(</span><span>m </span><span class="token token operator">*</span><span>MockUserRepository</span><span class="token token punctuation">)</span><span></span><span class="token token">Create</span><span class="token token punctuation">(</span><span>user </span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">)</span><span></span><span class="token token">error</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">if</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> exists </span><span class="token token operator">:=</span><span> m</span><span class="token token punctuation">.</span><span>users</span><span class="token token punctuation">[</span><span>user</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">]</span><span class="token token punctuation">;</span><span> exists </span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span> errors</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token">"user already exists"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span>    m</span><span class="token token punctuation">.</span><span>users</span><span class="token token punctuation">[</span><span>user</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">]</span><span></span><span class="token token operator">=</span><span> user
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token punctuation">(</span><span>m </span><span class="token token operator">*</span><span>MockUserRepository</span><span class="token token punctuation">)</span><span></span><span class="token token">GetByEmail</span><span class="token token punctuation">(</span><span>email </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">(</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">,</span><span></span><span class="token token">error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    user</span><span class="token token punctuation">,</span><span> exists </span><span class="token token operator">:=</span><span> m</span><span class="token token punctuation">.</span><span>users</span><span class="token token punctuation">[</span><span>email</span><span class="token token punctuation">]</span><span>
</span></span><span><span></span><span class="token token">if</span><span></span><span class="token token operator">!</span><span>exists </span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span> errors</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token">"user not found"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token">return</span><span> user</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">var</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">=</span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"AuthService"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">var</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span>        authService </span><span class="token token operator">*</span><span>service</span><span class="token token punctuation">.</span><span>AuthService
</span></span><span><span>        mockRepo    </span><span class="token token operator">*</span><span>MockUserRepository
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">BeforeEach</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>        mockRepo </span><span class="token token operator">=</span><span></span><span class="token token operator">&</span><span>MockUserRepository</span><span class="token token punctuation">{</span><span>
</span></span><span><span>            users</span><span class="token token punctuation">:</span><span></span><span class="token token">make</span><span class="token token punctuation">(</span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span>        authService </span><span class="token token operator">=</span><span> service</span><span class="token token punctuation">.</span><span class="token token">NewAuthService</span><span class="token token punctuation">(</span><span>mockRepo</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"SignUp"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"with valid credentials"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should create a new user"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                email </span><span class="token token operator">:=</span><span></span><span class="token token">"test@example.com"</span><span>
</span></span><span><span>                password </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span>              
</span><span><span>                user</span><span class="token token punctuation">,</span><span> token</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>PasswordHash</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">BeEmpty</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>token</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">BeEmpty</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"when email already exists"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return an error"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                email </span><span class="token token operator">:=</span><span></span><span class="token token">"test@example.com"</span><span>
</span></span><span><span>                password </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// First signup succeeds</span><span>
</span></span><span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Second signup fails</span><span>
</span></span><span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">.</span><span class="token token">Error</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">ContainSubstring</span><span class="token token punctuation">(</span><span class="token token">"already exists"</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"SignIn"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"with valid credentials"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return user and token"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                email </span><span class="token token operator">:=</span><span></span><span class="token token">"test@example.com"</span><span>
</span></span><span><span>                password </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Setup: Create user first</span><span>
</span></span><span><span>                authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Test: Sign in</span><span>
</span></span><span><span>                user</span><span class="token token punctuation">,</span><span> token</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignIn</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>token</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">BeEmpty</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"with invalid password"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return an error"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                email </span><span class="token token operator">:=</span><span></span><span class="token token">"test@example.com"</span><span>
</span></span><span><span>                password </span><span class="token token operator">:=</span><span></span><span class="token token">"SecurePass123!"</span><span>
</span></span><span><span>                wrongPassword </span><span class="token token operator">:=</span><span></span><span class="token token">"WrongPass456!"</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Setup: Create user</span><span>
</span></span><span><span>                authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">// Test: Sign in with wrong password</span><span>
</span></span><span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignIn</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> wrongPassword</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">.</span><span class="token token">Error</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span class="token token">"invalid credentials"</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 2: Run Test (RED)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span>ginkgo -v internal/service
</span></span><span>
</span><span><span></span><span class="token token"># Output: FAIL (AuthService doesn't exist)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 3: Write Implementation

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// internal/service/auth_service.go</span><span>
</span></span><span><span></span><span class="token token">package</span><span> service
</span></span><span>
</span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token">"errors"</span><span>
</span></span><span><span></span><span class="token token">"time"</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">"github.com/google/uuid"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/internal/models"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/internal/repository"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/pkg/jwt"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/pkg/password"</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">type</span><span> AuthService </span><span class="token token">struct</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    repo repository</span><span class="token token punctuation">.</span><span>UserRepository
</span></span><span><span>    jwt  </span><span class="token token operator">*</span><span>jwt</span><span class="token token punctuation">.</span><span>Manager
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token">NewAuthService</span><span class="token token punctuation">(</span><span>repo repository</span><span class="token token punctuation">.</span><span>UserRepository</span><span class="token token punctuation">)</span><span></span><span class="token token operator">*</span><span>AuthService </span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token operator">&</span><span>AuthService</span><span class="token token punctuation">{</span><span>
</span></span><span><span>        repo</span><span class="token token punctuation">:</span><span> repo</span><span class="token token punctuation">,</span><span>
</span></span><span><span>        jwt</span><span class="token token punctuation">:</span><span>  jwt</span><span class="token token punctuation">.</span><span class="token token">NewManager</span><span class="token token punctuation">(</span><span class="token token">"your-secret-key"</span><span class="token token punctuation">,</span><span></span><span class="token token">24</span><span class="token token operator">*</span><span>time</span><span class="token token punctuation">.</span><span>Hour</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token punctuation">(</span><span>s </span><span class="token token operator">*</span><span>AuthService</span><span class="token token punctuation">)</span><span></span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> pass </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">(</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">,</span><span></span><span class="token token">string</span><span class="token token punctuation">,</span><span></span><span class="token token">error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">// Hash password</span><span>
</span></span><span><span>    passwordHash</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">HashPassword</span><span class="token token punctuation">(</span><span>pass</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">// Create user</span><span>
</span></span><span><span>    user </span><span class="token token operator">:=</span><span></span><span class="token token operator">&</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">{</span><span>
</span></span><span><span>        ID</span><span class="token token punctuation">:</span><span>           uuid</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>        Email</span><span class="token token punctuation">:</span><span>        email</span><span class="token token punctuation">,</span><span>
</span></span><span><span>        PasswordHash</span><span class="token token punctuation">:</span><span> passwordHash</span><span class="token token punctuation">,</span><span>
</span></span><span><span>        CreatedAt</span><span class="token token punctuation">:</span><span>    time</span><span class="token token punctuation">.</span><span class="token token">Now</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">:=</span><span> s</span><span class="token token punctuation">.</span><span>repo</span><span class="token token punctuation">.</span><span class="token token">Create</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">// Generate JWT</span><span>
</span></span><span><span>    token</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> s</span><span class="token token punctuation">.</span><span>jwt</span><span class="token token punctuation">.</span><span class="token token">Generate</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>ID</span><span class="token token punctuation">.</span><span class="token token">String</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">return</span><span> user</span><span class="token token punctuation">,</span><span> token</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token">func</span><span></span><span class="token token punctuation">(</span><span>s </span><span class="token token operator">*</span><span>AuthService</span><span class="token token punctuation">)</span><span></span><span class="token token">SignIn</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> pass </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">(</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">,</span><span></span><span class="token token">string</span><span class="token token punctuation">,</span><span></span><span class="token token">error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">// Get user</span><span>
</span></span><span><span>    user</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> s</span><span class="token token punctuation">.</span><span>repo</span><span class="token token punctuation">.</span><span class="token token">GetByEmail</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> errors</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token">"invalid credentials"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">// Verify password</span><span>
</span></span><span><span>    isValid</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> password</span><span class="token token punctuation">.</span><span class="token token">VerifyPassword</span><span class="token token punctuation">(</span><span>pass</span><span class="token token punctuation">,</span><span> user</span><span class="token token punctuation">.</span><span>PasswordHash</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token operator">||</span><span></span><span class="token token operator">!</span><span>isValid </span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> errors</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token">"invalid credentials"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">// Generate JWT</span><span>
</span></span><span><span>    token</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> s</span><span class="token token punctuation">.</span><span>jwt</span><span class="token token punctuation">.</span><span class="token token">Generate</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>ID</span><span class="token token punctuation">.</span><span class="token token">String</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">if</span><span> err </span><span class="token token operator">!=</span><span></span><span class="token token boolean">nil</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">return</span><span></span><span class="token token boolean">nil</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span> err
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">return</span><span> user</span><span class="token token punctuation">,</span><span> token</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">nil</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 4: Run Test (GREEN)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span>ginkgo -v internal/service
</span></span><span>
</span><span><span></span><span class="token token"># Output: PASS</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Example 3: Table-Driven Tests[lambdatest](https://www.lambdatest.com/automation-testing-advisor/golang/methods/ginkgo.DescribeTable)

 **Best for testing multiple scenarios with same logic** :

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// internal/service/auth_service_test.go</span><span>
</span></span><span><span></span><span class="token token">var</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">=</span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"AuthService - Input Validation"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">var</span><span> authService </span><span class="token token operator">*</span><span>service</span><span class="token token punctuation">.</span><span>AuthService
</span></span><span>  
</span><span><span></span><span class="token token">BeforeEach</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>        mockRepo </span><span class="token token operator">:=</span><span></span><span class="token token operator">&</span><span>MockUserRepository</span><span class="token token punctuation">{</span><span>users</span><span class="token token punctuation">:</span><span></span><span class="token token">make</span><span class="token token punctuation">(</span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span>
</span></span><span><span>        authService </span><span class="token token operator">=</span><span> service</span><span class="token token punctuation">.</span><span class="token token">NewAuthService</span><span class="token token punctuation">(</span><span>mockRepo</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">DescribeTable</span><span class="token token punctuation">(</span><span class="token token">"SignUp input validation"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password </span><span class="token token">string</span><span class="token token punctuation">,</span><span> shouldFail </span><span class="token token">bool</span><span class="token token punctuation">,</span><span> errorMsg </span><span class="token token">string</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> authService</span><span class="token token punctuation">.</span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span>email</span><span class="token token punctuation">,</span><span> password</span><span class="token token punctuation">)</span><span>
</span></span><span>          
</span><span><span></span><span class="token token">if</span><span> shouldFail </span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">.</span><span class="token token">Error</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">ContainSubstring</span><span class="token token punctuation">(</span><span>errorMsg</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token">else</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"valid email and password"</span><span class="token token punctuation">,</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span></span><span class="token token">"SecurePass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"invalid email format"</span><span class="token token punctuation">,</span><span></span><span class="token token">"invalid-email"</span><span class="token token punctuation">,</span><span></span><span class="token token">"SecurePass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span></span><span class="token token">"invalid email"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"empty email"</span><span class="token token punctuation">,</span><span></span><span class="token token">""</span><span class="token token punctuation">,</span><span></span><span class="token token">"SecurePass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span></span><span class="token token">"email required"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"password too short"</span><span class="token token punctuation">,</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span></span><span class="token token">"short"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span></span><span class="token token">"password must be at least 8 characters"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"password without number"</span><span class="token token punctuation">,</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span></span><span class="token token">"SecurePass!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span></span><span class="token token">"password must contain number"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"password without uppercase"</span><span class="token token punctuation">,</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span></span><span class="token token">"securepass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span></span><span class="token token">"password must contain uppercase"</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Example 4: API Handler Tests (Integration)[dev](https://dev.to/calvinmclean/test-driven-api-development-in-go-1fb8)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// internal/api/handlers/auth_handler_test.go</span><span>
</span></span><span><span></span><span class="token token">package</span><span> handlers_test
</span></span><span>
</span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token">"bytes"</span><span>
</span></span><span><span></span><span class="token token">"encoding/json"</span><span>
</span></span><span><span></span><span class="token token">"net/http"</span><span>
</span></span><span><span></span><span class="token token">"net/http/httptest"</span><span>
</span></span><span>  
</span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/ginkgo/v2"</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span></span><span class="token token">"github.com/onsi/gomega"</span><span>
</span></span><span><span></span><span class="token token">"github.com/gin-gonic/gin"</span><span>
</span></span><span><span></span><span class="token token">"github.com/yourusername/rakuten-auth/internal/api/handlers"</span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>
</span><span><span></span><span class="token token">var</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">=</span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"AuthHandler"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">var</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span>        router  </span><span class="token token operator">*</span><span>gin</span><span class="token token punctuation">.</span><span>Engine
</span></span><span><span>        handler </span><span class="token token operator">*</span><span>handlers</span><span class="token token punctuation">.</span><span>AuthHandler
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">BeforeEach</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>        gin</span><span class="token token punctuation">.</span><span class="token token">SetMode</span><span class="token token punctuation">(</span><span>gin</span><span class="token token punctuation">.</span><span>TestMode</span><span class="token token punctuation">)</span><span>
</span></span><span><span>        router </span><span class="token token operator">=</span><span> gin</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">// Setup with mock service</span><span>
</span></span><span><span>        handler </span><span class="token token operator">=</span><span> handlers</span><span class="token token punctuation">.</span><span class="token token">NewAuthHandler</span><span class="token token punctuation">(</span><span>mockAuthService</span><span class="token token punctuation">)</span><span>
</span></span><span><span>        router</span><span class="token token punctuation">.</span><span class="token token">POST</span><span class="token token punctuation">(</span><span class="token token">"/api/auth/signup"</span><span class="token token punctuation">,</span><span> handler</span><span class="token token punctuation">.</span><span>SignUp</span><span class="token token punctuation">)</span><span>
</span></span><span><span>        router</span><span class="token token punctuation">.</span><span class="token token">POST</span><span class="token token punctuation">(</span><span class="token token">"/api/auth/signin"</span><span class="token token punctuation">,</span><span> handler</span><span class="token token punctuation">.</span><span>SignIn</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"POST /api/auth/signup"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"with valid credentials"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return 201 and user data"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                reqBody </span><span class="token token operator">:=</span><span></span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token">string</span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">"email"</span><span class="token token punctuation">:</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">"password"</span><span class="token token punctuation">:</span><span></span><span class="token token">"SecurePass123!"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span>                jsonBody</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> json</span><span class="token token punctuation">.</span><span class="token token">Marshal</span><span class="token token punctuation">(</span><span>reqBody</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span>                req </span><span class="token token operator">:=</span><span> httptest</span><span class="token token punctuation">.</span><span class="token token">NewRequest</span><span class="token token punctuation">(</span><span>http</span><span class="token token punctuation">.</span><span>MethodPost</span><span class="token token punctuation">,</span><span></span><span class="token token">"/api/auth/signup"</span><span class="token token punctuation">,</span><span> bytes</span><span class="token token punctuation">.</span><span class="token token">NewBuffer</span><span class="token token punctuation">(</span><span>jsonBody</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span>                req</span><span class="token token punctuation">.</span><span>Header</span><span class="token token punctuation">.</span><span class="token token">Set</span><span class="token token punctuation">(</span><span class="token token">"Content-Type"</span><span class="token token punctuation">,</span><span></span><span class="token token">"application/json"</span><span class="token token punctuation">)</span><span>
</span></span><span><span>                w </span><span class="token token operator">:=</span><span> httptest</span><span class="token token punctuation">.</span><span class="token token">NewRecorder</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span>                router</span><span class="token token punctuation">.</span><span class="token token">ServeHTTP</span><span class="token token punctuation">(</span><span>w</span><span class="token token punctuation">,</span><span> req</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>w</span><span class="token token punctuation">.</span><span>Code</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>http</span><span class="token token punctuation">.</span><span>StatusCreated</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">var</span><span> response </span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token">interface</span><span class="token token punctuation">{</span><span class="token token punctuation">}</span><span>
</span></span><span><span>                json</span><span class="token token punctuation">.</span><span class="token token">Unmarshal</span><span class="token token punctuation">(</span><span>w</span><span class="token token punctuation">.</span><span>Body</span><span class="token token punctuation">.</span><span class="token token">Bytes</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token operator">&</span><span>response</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>response</span><span class="token token punctuation">[</span><span class="token token">"email"</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span class="token token">"test@example.com"</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>response</span><span class="token token punctuation">[</span><span class="token token">"token"</span><span class="token token punctuation">]</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">BeEmpty</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"with invalid JSON"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should return 400 Bad Request"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>                req </span><span class="token token operator">:=</span><span> httptest</span><span class="token token punctuation">.</span><span class="token token">NewRequest</span><span class="token token punctuation">(</span><span>http</span><span class="token token punctuation">.</span><span>MethodPost</span><span class="token token punctuation">,</span><span></span><span class="token token">"/api/auth/signup"</span><span class="token token punctuation">,</span><span> bytes</span><span class="token token punctuation">.</span><span class="token token">NewBufferString</span><span class="token token punctuation">(</span><span class="token token">"invalid json"</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span>                req</span><span class="token token punctuation">.</span><span>Header</span><span class="token token punctuation">.</span><span class="token token">Set</span><span class="token token punctuation">(</span><span class="token token">"Content-Type"</span><span class="token token punctuation">,</span><span></span><span class="token token">"application/json"</span><span class="token token punctuation">)</span><span>
</span></span><span><span>                w </span><span class="token token operator">:=</span><span> httptest</span><span class="token token punctuation">.</span><span class="token token">NewRecorder</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span>                router</span><span class="token token punctuation">.</span><span class="token token">ServeHTTP</span><span class="token token punctuation">(</span><span>w</span><span class="token token punctuation">,</span><span> req</span><span class="token token punctuation">)</span><span>
</span></span><span>              
</span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>w</span><span class="token token punctuation">.</span><span>Code</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>http</span><span class="token token punctuation">.</span><span>StatusBadRequest</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Running Ginkgo Tests

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token"># Run all tests</span><span>
</span></span><span>ginkgo -r -v
</span><span>
</span><span><span></span><span class="token token"># Run with coverage</span><span>
</span></span><span><span>ginkgo -r -cover -coverprofile</span><span class="token token operator">=</span><span>coverage.out
</span></span><span>
</span><span><span></span><span class="token token"># Run specific suite</span><span>
</span></span><span>ginkgo -v internal/service
</span><span>
</span><span><span></span><span class="token token"># Run tests in parallel (4 processes)</span><span>
</span></span><span><span>ginkgo -r -p -procs</span><span class="token token operator">=</span><span class="token token">4</span><span>
</span></span><span>
</span><span><span></span><span class="token token"># Watch mode (auto-rerun on file changes)</span><span>
</span></span><span><span>ginkgo </span><span class="token token">watch</span><span> -r
</span></span><span>
</span><span><span></span><span class="token token"># Focus on specific test</span><span>
</span></span><span><span></span><span class="token token"># Add FIt, FDescribe, or FContext in test file</span><span>
</span></span><span>ginkgo -v
</span><span>
</span><span><span></span><span class="token token"># Generate coverage report</span><span>
</span></span><span><span>go tool cover -html</span><span class="token token operator">=</span><span>coverage.out -o coverage.html
</span></span><span></span></code></span></div></div></div></pre>

---

## Part 2: Frontend TDD with Jest + React Testing Library

## Why Jest + React Testing Library?

 **Jest** :[dev**+2**](https://dev.to/sahilverma_dev/introduction-to-testing-in-react-with-typescript-5edd)

* ✅  **Zero config** : Works out-of-box with TypeScript
* ✅  **Snapshot testing** : UI regression detection
* ✅  **Mocking** : Built-in mocks, spies, stubs
* ✅  **Fast** : Parallel execution, watch mode
* ✅  **Standard** : Industry standard for React

 **React Testing Library (RTL)** :[raygun**+2**](https://raygun.com/blog/javascript-unit-testing-frameworks/)

* ✅  **User-centric** : Tests how users interact with UI
* ✅  **Accessibility-first** : Encourages semantic HTML
* ✅  **Maintainable** : Tests survive refactors
* ✅  **Not implementation details** : Focuses on behavior

 **Vitest vs Jest** :[betterstack**+2**](https://betterstack.com/community/guides/scaling-nodejs/vitest-vs-jest/)

* Vitest: 10-20x faster in watch mode (with Vite projects)
* Jest: More mature, better ecosystem, battle-tested
* **Recommendation** : Stick with Jest for 4-day deadline (stability > speed)

---

## Setup Jest + React Testing Library

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token">cd</span><span> frontend
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">install</span><span> --save-dev @testing-library/react @testing-library/jest-dom @testing-library/user-event jest jest-environment-jsdom ts-jest @types/jest
</span></span><span></span></code></span></div></div></div></pre>

 **jest.config.ts** :

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">import</span><span></span><span class="token token">type</span><span></span><span class="token token punctuation">{</span><span> Config </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'jest'</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">const</span><span> config</span><span class="token token operator">:</span><span> Config </span><span class="token token operator">=</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>  preset</span><span class="token token operator">:</span><span></span><span class="token token">'ts-jest'</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  testEnvironment</span><span class="token token operator">:</span><span></span><span class="token token">'jsdom'</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  setupFilesAfterEnv</span><span class="token token operator">:</span><span></span><span class="token token punctuation">[</span><span class="token token">'<rootDir>/src/setupTests.ts'</span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  moduleNameMapper</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token string-property property">'^@/(.*)$'</span><span class="token token operator">:</span><span></span><span class="token token">'<rootDir>/src/$1'</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token string-property property">'\\.(css|less|scss|sass)$'</span><span class="token token operator">:</span><span></span><span class="token token">'identity-obj-proxy'</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  collectCoverageFrom</span><span class="token token operator">:</span><span></span><span class="token token punctuation">[</span><span>
</span></span><span><span></span><span class="token token">'src/**/*.{ts,tsx}'</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">'!src/**/*.d.ts'</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token">'!src/main.tsx'</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">]</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  coverageThreshold</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    global</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>      branches</span><span class="token token operator">:</span><span></span><span class="token token">70</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      functions</span><span class="token token operator">:</span><span></span><span class="token token">70</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      lines</span><span class="token token operator">:</span><span></span><span class="token token">70</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      statements</span><span class="token token operator">:</span><span></span><span class="token token">70</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">export</span><span></span><span class="token token">default</span><span> config</span><span class="token token punctuation">;</span><span>
</span></span><span></span></code></span></div></div></div></pre>

 **src/setupTests.ts** :

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">import</span><span></span><span class="token token">'@testing-library/jest-dom'</span><span class="token token punctuation">;</span><span>
</span></span><span></span></code></span></div></div></div></pre>

 **package.json scripts** :

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">json</div></div><div><span><code><span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token property">"scripts"</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token property">"test"</span><span class="token token operator">:</span><span></span><span class="token token">"jest"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token property">"test:watch"</span><span class="token token operator">:</span><span></span><span class="token token">"jest --watch"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token property">"test:coverage"</span><span class="token token operator">:</span><span></span><span class="token token">"jest --coverage"</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## TDD Workflow for Frontend

Same Red-Green-Refactor cycle as backend:

1. **Write failing test** (describe expected user behavior)
2. **Run test** (watch it fail)
3. **Write component** (minimum code to pass)
4. **Run test** (watch it pass)
5. **Refactor** (improve code quality)

---

## Example 1: SignUp Form Component

## Step 1: Write Failing Test

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">// src/components/SignUp.test.tsx</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> render</span><span class="token token punctuation">,</span><span> screen</span><span class="token token punctuation">,</span><span> waitFor </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@testing-library/react'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span> userEvent </span><span class="token token">from</span><span></span><span class="token token">'@testing-library/user-event'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> SignUp </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'./SignUp'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token operator">*</span><span></span><span class="token token">as</span><span> authApi </span><span class="token token">from</span><span></span><span class="token token">'@/api/auth'</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">// Mock API</span><span>
</span></span><span><span>jest</span><span class="token token punctuation">.</span><span class="token token">mock</span><span class="token token punctuation">(</span><span class="token token">'@/api/auth'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span> mockSignUp </span><span class="token token operator">=</span><span> authApi</span><span class="token token punctuation">.</span><span>signUp </span><span class="token token">as</span><span> jest</span><span class="token token punctuation">.</span><span>MockedFunction</span><span class="token token operator"><</span><span class="token token">typeof</span><span> authApi</span><span class="token token punctuation">.</span><span>signUp</span><span class="token token operator">></span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">describe</span><span class="token token punctuation">(</span><span class="token token">'SignUp Component'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">beforeEach</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>    jest</span><span class="token token punctuation">.</span><span class="token token">clearAllMocks</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">describe</span><span class="token token punctuation">(</span><span class="token token">'Form Rendering'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should render email and password inputs'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">password</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">describe</span><span class="token token punctuation">(</span><span class="token token">'Form Validation'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should show error for invalid email'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">const</span><span> emailInput </span><span class="token token operator">=</span><span> screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span> submitButton </span><span class="token token operator">=</span><span> screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>emailInput</span><span class="token token punctuation">,</span><span></span><span class="token token">'invalid-email'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>submitButton</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span></span><span class="token token">waitFor</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">invalid email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should show error for short password'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">const</span><span> passwordInput </span><span class="token token operator">=</span><span> screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">password</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span> submitButton </span><span class="token token operator">=</span><span> screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>passwordInput</span><span class="token token punctuation">,</span><span></span><span class="token token">'short'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>submitButton</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span></span><span class="token token">waitFor</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">at least 8 characters</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">describe</span><span class="token token punctuation">(</span><span class="token token">'Form Submission'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should call signUp API on valid submission'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span>      mockSignUp</span><span class="token token punctuation">.</span><span class="token token">mockResolvedValueOnce</span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span> 
</span></span><span><span>        user</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span> id</span><span class="token token operator">:</span><span></span><span class="token token">'1'</span><span class="token token punctuation">,</span><span> email</span><span class="token token operator">:</span><span></span><span class="token token">'test@example.com'</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span> 
</span></span><span><span>        token</span><span class="token token operator">:</span><span></span><span class="token token">'fake-token'</span><span> 
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'test@example.com'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">password</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'SecurePass123!'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span></span><span class="token token">waitFor</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>mockSignUp</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toHaveBeenCalledWith</span><span class="token token punctuation">(</span><span class="token token">'test@example.com'</span><span class="token token punctuation">,</span><span></span><span class="token token">'SecurePass123!'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should show error message on API failure'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span>      mockSignUp</span><span class="token token punctuation">.</span><span class="token token">mockRejectedValueOnce</span><span class="token token punctuation">(</span><span class="token token">new</span><span></span><span class="token token">Error</span><span class="token token punctuation">(</span><span class="token token">'Email already exists'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'test@example.com'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">password</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'SecurePass123!'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span></span><span class="token token">waitFor</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email already exists</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should redirect to profile on successful signup'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span> mockNavigate </span><span class="token token operator">=</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span>      jest</span><span class="token token punctuation">.</span><span class="token token">mock</span><span class="token token punctuation">(</span><span class="token token">'react-router-dom'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token operator">...</span><span>jest</span><span class="token token punctuation">.</span><span class="token token">requireActual</span><span class="token token punctuation">(</span><span class="token token">'react-router-dom'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token function-variable">useNavigate</span><span class="token token operator">:</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span> mockNavigate</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span>      mockSignUp</span><span class="token token punctuation">.</span><span class="token token">mockResolvedValueOnce</span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span> 
</span></span><span><span>        user</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span> id</span><span class="token token operator">:</span><span></span><span class="token token">'1'</span><span class="token token punctuation">,</span><span> email</span><span class="token token operator">:</span><span></span><span class="token token">'test@example.com'</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span> 
</span></span><span><span>        token</span><span class="token token operator">:</span><span></span><span class="token token">'fake-token'</span><span> 
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span class="token token operator"><</span><span>SignUp </span><span class="token token operator">/</span><span class="token token operator">></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'test@example.com'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">password</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span></span><span class="token token">'SecurePass123!'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>    
</span><span><span></span><span class="token token">await</span><span></span><span class="token token">waitFor</span><span class="token token punctuation">(</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>mockNavigate</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toHaveBeenCalledWith</span><span class="token token punctuation">(</span><span class="token token">'/profile'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 2: Run Test (RED)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token">npm</span><span></span><span class="token token">test</span><span>
</span></span><span>
</span><span><span></span><span class="token token"># Output: FAIL (SignUp component doesn't exist)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 3: Write Component (GREEN)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">// src/components/SignUp.tsx</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> useState </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'react'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> useNavigate </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'react-router-dom'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> useForm </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'react-hook-form'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> zodResolver </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@hookform/resolvers/zod'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> z </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'zod'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> signUp </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@/api/auth'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> useAuth </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@/contexts/AuthContext'</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">const</span><span> signUpSchema </span><span class="token token operator">=</span><span> z</span><span class="token token punctuation">.</span><span class="token token">object</span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span>
</span></span><span><span>  email</span><span class="token token operator">:</span><span> z</span><span class="token token punctuation">.</span><span class="token token">string</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">email</span><span class="token token punctuation">(</span><span class="token token">'Invalid email address'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>  password</span><span class="token token operator">:</span><span> z</span><span class="token token punctuation">.</span><span class="token token">string</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span class="token token">min</span><span class="token token punctuation">(</span><span class="token token">8</span><span class="token token punctuation">,</span><span></span><span class="token token">'Password must be at least 8 characters'</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span class="token token">regex</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">[A-Z]</span><span class="token token regex-delimiter">/</span><span class="token token punctuation">,</span><span></span><span class="token token">'Password must contain uppercase letter'</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">.</span><span class="token token">regex</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">[0-9]</span><span class="token token regex-delimiter">/</span><span class="token token punctuation">,</span><span></span><span class="token token">'Password must contain number'</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">type</span><span></span><span class="token token">SignUpForm</span><span></span><span class="token token operator">=</span><span> z</span><span class="token token punctuation">.</span><span>infer</span><span class="token token operator"><</span><span class="token token">typeof</span><span> signUpSchema</span><span class="token token operator">></span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">export</span><span></span><span class="token token">function</span><span></span><span class="token token">SignUp</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> navigate </span><span class="token token operator">=</span><span></span><span class="token token">useNavigate</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span></span><span class="token token punctuation">{</span><span> setAuth </span><span class="token token punctuation">}</span><span></span><span class="token token operator">=</span><span></span><span class="token token">useAuth</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span></span><span class="token token punctuation">[</span><span>apiError</span><span class="token token punctuation">,</span><span> setApiError</span><span class="token token punctuation">]</span><span></span><span class="token token operator">=</span><span></span><span class="token token generic-function">useState</span><span class="token token generic-function generic operator"><</span><span class="token token generic-function generic">string</span><span class="token token generic-function generic operator">></span><span class="token token punctuation">(</span><span class="token token">''</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">const</span><span></span><span class="token token punctuation">{</span><span> 
</span></span><span><span>    register</span><span class="token token punctuation">,</span><span> 
</span></span><span><span>    handleSubmit</span><span class="token token punctuation">,</span><span> 
</span></span><span><span>    formState</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span> errors</span><span class="token token punctuation">,</span><span> isSubmitting </span><span class="token token punctuation">}</span><span> 
</span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token operator">=</span><span></span><span class="token token generic-function">useForm</span><span class="token token generic-function generic operator"><</span><span class="token token generic-function generic">SignUpForm</span><span class="token token generic-function generic operator">></span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span>
</span></span><span><span>    resolver</span><span class="token token operator">:</span><span></span><span class="token token">zodResolver</span><span class="token token punctuation">(</span><span>signUpSchema</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">const</span><span></span><span class="token token function-variable">onSubmit</span><span></span><span class="token token operator">=</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span>data</span><span class="token token operator">:</span><span> SignUpForm</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">try</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">setApiError</span><span class="token token punctuation">(</span><span class="token token">''</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">const</span><span> response </span><span class="token token operator">=</span><span></span><span class="token token">await</span><span></span><span class="token token">signUp</span><span class="token token punctuation">(</span><span>data</span><span class="token token punctuation">.</span><span>email</span><span class="token token punctuation">,</span><span> data</span><span class="token token punctuation">.</span><span>password</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">setAuth</span><span class="token token punctuation">(</span><span>response</span><span class="token token punctuation">.</span><span>user</span><span class="token token punctuation">,</span><span> response</span><span class="token token punctuation">.</span><span>token</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">navigate</span><span class="token token punctuation">(</span><span class="token token">'/profile'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token">catch</span><span></span><span class="token token punctuation">(</span><span>error</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">setApiError</span><span class="token token punctuation">(</span><span>error </span><span class="token token">instanceof</span><span></span><span class="token token">Error</span><span></span><span class="token token operator">?</span><span> error</span><span class="token token punctuation">.</span><span>message </span><span class="token token operator">:</span><span></span><span class="token token">'Sign up failed'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">return</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>form onSubmit</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token">handleSubmit</span><span class="token token punctuation">(</span><span>onSubmit</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>div</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>label htmlFor</span><span class="token token operator">=</span><span class="token token">"email"</span><span class="token token operator">></span><span>Email</span><span class="token token operator"><</span><span class="token token operator">/</span><span>label</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>input 
</span></span><span><span>          id</span><span class="token token operator">=</span><span class="token token">"email"</span><span> 
</span></span><span><span>          type</span><span class="token token operator">=</span><span class="token token">"email"</span><span> 
</span></span><span><span></span><span class="token token punctuation">{</span><span class="token token operator">...</span><span class="token token">register</span><span class="token token punctuation">(</span><span class="token token">'email'</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span> 
</span></span><span><span>          aria</span><span class="token token operator">-</span><span>invalid</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token operator">!</span><span class="token token operator">!</span><span>errors</span><span class="token token punctuation">.</span><span>email</span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">{</span><span>errors</span><span class="token token punctuation">.</span><span>email </span><span class="token token operator">&&</span><span></span><span class="token token operator"><</span><span>span role</span><span class="token token operator">=</span><span class="token token">"alert"</span><span class="token token operator">></span><span class="token token punctuation">{</span><span>errors</span><span class="token token punctuation">.</span><span>email</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">}</span><span class="token token operator"><</span><span class="token token operator">/</span><span>span</span><span class="token token operator">></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>div</span><span class="token token operator">></span><span>
</span></span><span>    
</span><span><span></span><span class="token token operator"><</span><span>div</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>label htmlFor</span><span class="token token operator">=</span><span class="token token">"password"</span><span class="token token operator">></span><span>Password</span><span class="token token operator"><</span><span class="token token operator">/</span><span>label</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>input 
</span></span><span><span>          id</span><span class="token token operator">=</span><span class="token token">"password"</span><span> 
</span></span><span><span>          type</span><span class="token token operator">=</span><span class="token token">"password"</span><span> 
</span></span><span><span></span><span class="token token punctuation">{</span><span class="token token operator">...</span><span class="token token">register</span><span class="token token punctuation">(</span><span class="token token">'password'</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span> 
</span></span><span><span>          aria</span><span class="token token operator">-</span><span>invalid</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token operator">!</span><span class="token token operator">!</span><span>errors</span><span class="token token punctuation">.</span><span>password</span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">{</span><span>errors</span><span class="token token punctuation">.</span><span>password </span><span class="token token operator">&&</span><span></span><span class="token token operator"><</span><span>span role</span><span class="token token operator">=</span><span class="token token">"alert"</span><span class="token token operator">></span><span class="token token punctuation">{</span><span>errors</span><span class="token token punctuation">.</span><span>password</span><span class="token token punctuation">.</span><span>message</span><span class="token token punctuation">}</span><span class="token token operator"><</span><span class="token token operator">/</span><span>span</span><span class="token token operator">></span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>div</span><span class="token token operator">></span><span>
</span></span><span>    
</span><span><span></span><span class="token token punctuation">{</span><span>apiError </span><span class="token token operator">&&</span><span></span><span class="token token operator"><</span><span>div role</span><span class="token token operator">=</span><span class="token token">"alert"</span><span class="token token operator">></span><span class="token token punctuation">{</span><span>apiError</span><span class="token token punctuation">}</span><span class="token token operator"><</span><span class="token token operator">/</span><span>div</span><span class="token token operator">></span><span class="token token punctuation">}</span><span>
</span></span><span>    
</span><span><span></span><span class="token token operator"><</span><span>button type</span><span class="token token operator">=</span><span class="token token">"submit"</span><span> disabled</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>isSubmitting</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">{</span><span>isSubmitting </span><span class="token token operator">?</span><span></span><span class="token token">'Signing up...'</span><span></span><span class="token token operator">:</span><span></span><span class="token token">'Sign Up'</span><span class="token token punctuation">}</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>button</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>form</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span></span></code></span></div></div></div></pre>

## Step 4: Run Test (GREEN)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token">npm</span><span></span><span class="token token">test</span><span>
</span></span><span>
</span><span><span></span><span class="token token"># Output: PASS</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Example 2: Protected Route Component

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">// src/components/PrivateRoute.test.tsx</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> render</span><span class="token token punctuation">,</span><span> screen </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@testing-library/react'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> MemoryRouter</span><span class="token token punctuation">,</span><span> Route</span><span class="token token punctuation">,</span><span> Routes </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'react-router-dom'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> PrivateRoute </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'./PrivateRoute'</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">import</span><span></span><span class="token token punctuation">{</span><span> AuthContext </span><span class="token token punctuation">}</span><span></span><span class="token token">from</span><span></span><span class="token token">'@/contexts/AuthContext'</span><span class="token token punctuation">;</span><span>
</span></span><span>
</span><span><span></span><span class="token token">describe</span><span class="token token punctuation">(</span><span class="token token">'PrivateRoute Component'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span></span><span class="token token function-variable">TestComponent</span><span></span><span class="token token operator">=</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token operator"><</span><span>div</span><span class="token token operator">></span><span>Protected Content</span><span class="token token operator"><</span><span class="token token operator">/</span><span>div</span><span class="token token operator">></span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should render children when user is authenticated'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> authContextValue </span><span class="token token operator">=</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>      isAuthenticated</span><span class="token token operator">:</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      user</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span> id</span><span class="token token operator">:</span><span></span><span class="token token">'1'</span><span class="token token punctuation">,</span><span> email</span><span class="token token operator">:</span><span></span><span class="token token">'test@example.com'</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      token</span><span class="token token operator">:</span><span></span><span class="token token">'fake-token'</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signIn</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signUp</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signOut</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>AuthContext</span><span class="token token punctuation">.</span><span>Provider value</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>authContextValue</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>MemoryRouter initialEntries</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token punctuation">[</span><span class="token token">'/protected'</span><span class="token token punctuation">]</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>Routes</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>Route path</span><span class="token token operator">=</span><span class="token token">"/protected"</span><span> element</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>PrivateRoute</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>TestComponent </span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>PrivateRoute</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>Routes</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>MemoryRouter</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>AuthContext</span><span class="token token punctuation">.</span><span>Provider</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token">'Protected Content'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should redirect to signin when user is not authenticated'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">const</span><span> authContextValue </span><span class="token token operator">=</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>      isAuthenticated</span><span class="token token operator">:</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      user</span><span class="token token operator">:</span><span></span><span class="token token">null</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      token</span><span class="token token operator">:</span><span></span><span class="token token">null</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signIn</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signUp</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>      signOut</span><span class="token token operator">:</span><span> jest</span><span class="token token punctuation">.</span><span class="token token">fn</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">render</span><span class="token token punctuation">(</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>AuthContext</span><span class="token token punctuation">.</span><span>Provider value</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>authContextValue</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>MemoryRouter initialEntries</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token punctuation">[</span><span class="token token">'/protected'</span><span class="token token punctuation">]</span><span class="token token punctuation">}</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>Routes</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>Route path</span><span class="token token operator">=</span><span class="token token">"/protected"</span><span> element</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>PrivateRoute</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>TestComponent </span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>PrivateRoute</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span>Route path</span><span class="token token operator">=</span><span class="token token">"/signin"</span><span> element</span><span class="token token operator">=</span><span class="token token punctuation">{</span><span class="token token operator"><</span><span>div</span><span class="token token operator">></span><span>Sign In Page</span><span class="token token operator"><</span><span class="token token operator">/</span><span>div</span><span class="token token operator">></span><span class="token token punctuation">}</span><span></span><span class="token token operator">/</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>Routes</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>MemoryRouter</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token operator"><</span><span class="token token operator">/</span><span>AuthContext</span><span class="token token punctuation">.</span><span>Provider</span><span class="token token operator">></span><span>
</span></span><span><span></span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token">'Sign In Page'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">queryByText</span><span class="token token punctuation">(</span><span class="token token">'Protected Content'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span>not</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Running Jest Tests

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">bash</div></div><div><span><code><span><span class="token token"># Run all tests</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span>
</span></span><span>
</span><span><span></span><span class="token token"># Watch mode (auto-rerun on changes)</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span> -- --watch
</span></span><span>
</span><span><span></span><span class="token token"># Coverage report</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span> -- --coverage
</span></span><span>
</span><span><span></span><span class="token token"># Run specific test file</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span> SignUp.test.tsx
</span></span><span>
</span><span><span></span><span class="token token"># Update snapshots</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span> -- -u
</span></span><span>
</span><span><span></span><span class="token token"># Verbose output</span><span>
</span></span><span><span></span><span class="token token">npm</span><span></span><span class="token token">test</span><span> -- --verbose
</span></span><span></span></code></span></div></div></div></pre>

---

## Part 3: Integration Testing Strategy

## Database Integration Tests (Backend)

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">// internal/repository/user_repository_test.go</span><span>
</span></span><span><span></span><span class="token token">var</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">=</span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"UserRepository Integration"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">var</span><span></span><span class="token token punctuation">(</span><span>
</span></span><span><span>        db   </span><span class="token token operator">*</span><span>sql</span><span class="token token punctuation">.</span><span>DB
</span></span><span><span>        repo repository</span><span class="token token punctuation">.</span><span>UserRepository
</span></span><span><span></span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">BeforeSuite</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">// Setup test database</span><span>
</span></span><span><span></span><span class="token token">var</span><span> err </span><span class="token token">error</span><span>
</span></span><span><span>        db</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">=</span><span> sql</span><span class="token token punctuation">.</span><span class="token token">Open</span><span class="token token punctuation">(</span><span class="token token">"postgres"</span><span class="token token punctuation">,</span><span></span><span class="token token">"postgres://test:test@localhost:5432/testdb?sslmode=disable"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span>      
</span><span><span></span><span class="token token">// Run migrations</span><span>
</span></span><span><span></span><span class="token token">runMigrations</span><span class="token token punctuation">(</span><span>db</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">BeforeEach</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">// Clean database before each test</span><span>
</span></span><span><span>        db</span><span class="token token punctuation">.</span><span class="token token">Exec</span><span class="token token punctuation">(</span><span class="token token">"TRUNCATE users CASCADE"</span><span class="token token punctuation">)</span><span>
</span></span><span><span>        repo </span><span class="token token operator">=</span><span> repository</span><span class="token token punctuation">.</span><span class="token token">NewUserRepository</span><span class="token token punctuation">(</span><span>db</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">AfterSuite</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>        db</span><span class="token token punctuation">.</span><span class="token token">Close</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span>  
</span><span><span></span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"Create"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should persist user to database"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
</span></span><span><span>            user </span><span class="token token operator">:=</span><span></span><span class="token token operator">&</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">{</span><span>
</span></span><span><span>                ID</span><span class="token token punctuation">:</span><span>           uuid</span><span class="token token punctuation">.</span><span class="token token">New</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
</span></span><span><span>                Email</span><span class="token token punctuation">:</span><span></span><span class="token token">"test@example.com"</span><span class="token token punctuation">,</span><span>
</span></span><span><span>                PasswordHash</span><span class="token token punctuation">:</span><span></span><span class="token token">"hashed_password"</span><span class="token token punctuation">,</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span>
</span></span><span>          
</span><span><span>            err </span><span class="token token operator">:=</span><span> repo</span><span class="token token punctuation">.</span><span class="token token">Create</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span>          
</span><span><span></span><span class="token token">// Verify persistence</span><span>
</span></span><span><span>            retrieved</span><span class="token token punctuation">,</span><span> err </span><span class="token token operator">:=</span><span> repo</span><span class="token token punctuation">.</span><span class="token token">GetByEmail</span><span class="token token punctuation">(</span><span class="token token">"test@example.com"</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>retrieved</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">Equal</span><span class="token token punctuation">(</span><span>user</span><span class="token token punctuation">.</span><span>Email</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
</span></span><span></span></code></span></div></div></div></pre>

---

## Part 4: TDD Best Practices for This Project

## Backend (Ginkgo/Gomega) Best Practices[kubernetes**+1**](https://www.kubernetes.dev/blog/2023/04/12/e2e-testing-best-practices-reloaded/)

1. **Descriptive Test Names**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">Describe</span><span class="token token punctuation">(</span><span class="token token">"AuthService"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">Context</span><span class="token token punctuation">(</span><span class="token token">"when user signs up with valid credentials"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">It</span><span class="token token punctuation">(</span><span class="token token">"should create user and return JWT token"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">// Test implementation</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
2. **Use BeforeEach for Setup**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">BeforeEach</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span>    mockRepo </span><span class="token token operator">=</span><span></span><span class="token token operator">&</span><span>MockUserRepository</span><span class="token token punctuation">{</span><span>users</span><span class="token token punctuation">:</span><span></span><span class="token token">make</span><span class="token token punctuation">(</span><span class="token token">map</span><span class="token token punctuation">[</span><span class="token token">string</span><span class="token token punctuation">]</span><span class="token token operator">*</span><span>models</span><span class="token token punctuation">.</span><span>User</span><span class="token token punctuation">)</span><span class="token token punctuation">}</span><span>
   </span></span><span><span>    authService </span><span class="token token operator">=</span><span> service</span><span class="token token punctuation">.</span><span class="token token">NewAuthService</span><span class="token token punctuation">(</span><span>mockRepo</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
3. **Table-Driven Tests for Multiple Scenarios**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">DescribeTable</span><span class="token token punctuation">(</span><span class="token token">"password validation"</span><span class="token token punctuation">,</span><span>
   </span></span><span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span>password </span><span class="token token">string</span><span class="token token punctuation">,</span><span> shouldPass </span><span class="token token">bool</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span>        err </span><span class="token token operator">:=</span><span></span><span class="token token">validatePassword</span><span class="token token punctuation">(</span><span>password</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token">if</span><span> shouldPass </span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">ToNot</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span></span><span class="token token">else</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">Expect</span><span class="token token punctuation">(</span><span>err</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">To</span><span class="token token punctuation">(</span><span class="token token">HaveOccurred</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span>
   </span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"valid password"</span><span class="token token punctuation">,</span><span></span><span class="token token">"SecurePass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">true</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
   </span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"too short"</span><span class="token token punctuation">,</span><span></span><span class="token token">"Short1!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
   </span></span><span><span></span><span class="token token">Entry</span><span class="token token punctuation">(</span><span class="token token">"no uppercase"</span><span class="token token punctuation">,</span><span></span><span class="token token">"securepass123!"</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">false</span><span class="token token punctuation">)</span><span class="token token punctuation">,</span><span>
   </span></span><span><span></span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
4. **Use Eventually() for Async Operations**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">Eventually</span><span class="token token punctuation">(</span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token">bool</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span>    response</span><span class="token token punctuation">,</span><span></span><span class="token token boolean">_</span><span></span><span class="token token operator">:=</span><span> http</span><span class="token token punctuation">.</span><span class="token token">Get</span><span class="token token punctuation">(</span><span class="token token">"http://localhost:8080/health"</span><span class="token token punctuation">)</span><span>
   </span></span><span><span></span><span class="token token">return</span><span> response</span><span class="token token punctuation">.</span><span>StatusCode </span><span class="token token operator">==</span><span></span><span class="token token">200</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span></span><span class="token token">"5s"</span><span class="token token punctuation">,</span><span></span><span class="token token">"100ms"</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">Should</span><span class="token token punctuation">(</span><span class="token token">BeTrue</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
5. **Focus Tests During Development**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">go</div></div><div><span><code><span><span class="token token">FIt</span><span class="token token punctuation">(</span><span class="token token">"should test this specific case"</span><span class="token token punctuation">,</span><span></span><span class="token token">func</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span></span><span class="token token">// Temporarily focus on this test</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>

## Frontend (Jest/RTL) Best Practices[trio**+1**](https://trio.dev/mastering-tdd-in-react/)

1. **Query by Accessibility**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">// ✅ Good: User-centric queries</span><span>
   </span></span><span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByRole</span><span class="token token punctuation">(</span><span class="token token">'button'</span><span class="token token punctuation">,</span><span></span><span class="token token punctuation">{</span><span> name</span><span class="token token operator">:</span><span></span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">sign up</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span>
   </span></span><span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByLabelText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">email</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span>
   </span></span><span>
   </span><span><span></span><span class="token token">// ❌ Bad: Implementation details</span><span>
   </span></span><span><span>container</span><span class="token token punctuation">.</span><span class="token token">querySelector</span><span class="token token punctuation">(</span><span class="token token">'.signup-button'</span><span class="token token punctuation">)</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
2. **User Interactions with userEvent**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">import</span><span> userEvent </span><span class="token token">from</span><span></span><span class="token token">'@testing-library/user-event'</span><span class="token token punctuation">;</span><span>
   </span></span><span>
   </span><span><span></span><span class="token token">const</span><span> user </span><span class="token token operator">=</span><span> userEvent</span><span class="token token punctuation">.</span><span class="token token">setup</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">type</span><span class="token token punctuation">(</span><span>emailInput</span><span class="token token punctuation">,</span><span></span><span class="token token">'test@example.com'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span><span></span><span class="token token">await</span><span> user</span><span class="token token punctuation">.</span><span class="token token">click</span><span class="token token punctuation">(</span><span>submitButton</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
3. **Mock API Calls**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span>jest</span><span class="token token punctuation">.</span><span class="token token">mock</span><span class="token token punctuation">(</span><span class="token token">'@/api/auth'</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span><span></span><span class="token token">const</span><span> mockSignUp </span><span class="token token operator">=</span><span> authApi</span><span class="token token punctuation">.</span><span>signUp </span><span class="token token">as</span><span> jest</span><span class="token token punctuation">.</span><span>MockedFunction</span><span class="token token operator"><</span><span class="token token">typeof</span><span> authApi</span><span class="token token punctuation">.</span><span>signUp</span><span class="token token operator">></span><span class="token token punctuation">;</span><span>
   </span></span><span>
   </span><span><span>mockSignUp</span><span class="token token punctuation">.</span><span class="token token">mockResolvedValueOnce</span><span class="token token punctuation">(</span><span class="token token punctuation">{</span><span> user</span><span class="token token operator">:</span><span></span><span class="token token punctuation">{</span><span class="token token operator">...</span><span class="token token punctuation">}</span><span class="token token punctuation">,</span><span> token</span><span class="token token operator">:</span><span></span><span class="token token">'...'</span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
4. **Test Error States**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">it</span><span class="token token punctuation">(</span><span class="token token">'should display error on API failure'</span><span class="token token punctuation">,</span><span></span><span class="token token">async</span><span></span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span></span><span class="token token operator">=></span><span></span><span class="token token punctuation">{</span><span>
   </span></span><span><span>    mockSignUp</span><span class="token token punctuation">.</span><span class="token token">mockRejectedValueOnce</span><span class="token token punctuation">(</span><span class="token token">new</span><span></span><span class="token token">Error</span><span class="token token punctuation">(</span><span class="token token">'Network error'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span><span></span><span class="token token">// ... render and interact</span><span>
   </span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token regex-delimiter">/</span><span class="token token regex-source language-regex">network error</span><span class="token token regex-delimiter">/</span><span class="token token regex-flags">i</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span><span></span><span class="token token punctuation">}</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span></span></code></span></div></div></div></pre>
5. **Avoid Testing Implementation Details**
   <pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">typescript</div></div><div><span><code><span><span class="token token">// ✅ Good: Test behavior</span><span>
   </span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>screen</span><span class="token token punctuation">.</span><span class="token token">getByText</span><span class="token token punctuation">(</span><span class="token token">'Welcome'</span><span class="token token punctuation">)</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBeInTheDocument</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span>
   </span><span><span></span><span class="token token">// ❌ Bad: Test state</span><span>
   </span></span><span><span></span><span class="token token">expect</span><span class="token token punctuation">(</span><span>component</span><span class="token token punctuation">.</span><span>state</span><span class="token token punctuation">.</span><span>isLoggedIn</span><span class="token token punctuation">)</span><span class="token token punctuation">.</span><span class="token token">toBe</span><span class="token token punctuation">(</span><span class="token token boolean">true</span><span class="token token punctuation">)</span><span class="token token punctuation">;</span><span>
   </span></span><span></span></code></span></div></div></div></pre>

---

## Part 5: TDD Workflow for Your 4-Day Timeline

## Day 1: Backend Core (TDD)

**Morning** (4 hours):

1. Write tests for password hashing (30 min)
2. Implement Argon2id hashing (1 hour)
3. Write tests for JWT generation (30 min)
4. Implement JWT service (1 hour)
5. Write tests for User model validation (1 hour)

**Afternoon** (4 hours):

6. Write tests for AuthService.SignUp (1 hour)
7. Implement SignUp logic (1 hour)
8. Write tests for AuthService.SignIn (1 hour)
9. Implement SignIn logic (1 hour)

## Day 2: Backend API + Frontend Core (TDD)

**Morning** (4 hours):

1. Write tests for POST /api/auth/signup handler (1 hour)
2. Implement signup handler (1 hour)
3. Write tests for POST /api/auth/signin handler (1 hour)
4. Implement signin handler (1 hour)

**Afternoon** (4 hours):

5. Write tests for GET /api/me handler (1 hour)
6. Implement protected endpoint (1 hour)
7. Write tests for SignUp component (1 hour)
8. Implement SignUp component (1 hour)

## Day 3: Frontend + Integration (TDD)

**Morning** (4 hours):

1. Write tests for SignIn component (1 hour)
2. Implement SignIn component (1 hour)
3. Write tests for Profile component (1 hour)
4. Implement Profile component (1 hour)

**Afternoon** (4 hours):

5. Write tests for AuthContext (1 hour)
6. Implement AuthContext (1 hour)
7. Write tests for PrivateRoute (30 min)
8. Implement PrivateRoute (30 min)
9. Integration testing (2 hours)

## Day 4: Polish + Report

**Morning** (4 hours):

1. Fix failing tests
2. Increase coverage to 80%+
3. Refactor based on test feedback

**Afternoon** (4 hours):

4. Write comprehensive report
5. Generate coverage reports
6. Finalize documentation
7. Submit before 23:59 AEDT

---

## Part 6: Makefile for TDD Workflow

<pre class="not-prose w-full rounded font-mono text-sm font-extralight"><div class="codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded-lg font-mono text-sm font-normal bg-subtler"><div class="translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end md:sticky md:top-[calc(var(--header-height)+var(--size-xs))]"><div class="overflow-hidden rounded-full border-subtlest ring-subtlest divide-subtlest bg-base"><div class="border-subtlest ring-subtlest divide-subtlest bg-subtler"><button data-testid="copy-code-button" aria-label="Copy code" type="button" class="focus-visible:bg-subtle hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium justify-center text-center items-center rounded-full cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center whitespace-nowrap inline-flex text-sm h-8 aspect-square" data-state="closed"><div class="flex items-center min-w-0 gap-two justify-center"><div class="flex shrink-0 items-center justify-center size-4"><svg role="img" class="inline-flex fill-current" width="16" height="16"><use xlink:href="#pplx-icon-copy"></use></svg></div></div></button></div></div></div><div class="-mt-xl"><div><div data-testid="code-language-indicator" class="text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-lg text-xs font-thin">makefile</div></div><div><span><code><span><span class="token token"># Makefile</span><span>
</span></span><span><span></span><span class="token token builtin-target">.PHONY</span><span class="token token punctuation">:</span><span> help test test-backend test-frontend test-watch coverage
</span></span><span>
</span><span><span></span><span class="token token target">help</span><span class="token token punctuation">:</span><span></span><span class="token token">## Show this help</span><span>
</span></span><span><span>	</span><span class="token token operator">@</span><span>grep -E </span><span class="token token">'^[a-zA-Z_-]+:.*?## .*$$'</span><span></span><span class="token token">$</span><span class="token token punctuation">(</span><span>MAKEFILE_LIST</span><span class="token token punctuation">)</span><span></span><span class="token token operator">|</span><span> sort </span><span class="token token operator">|</span><span> awk 'BEGIN </span><span class="token token punctuation">{</span><span>FS </span><span class="token token operator">=</span><span></span><span class="token token">":.*?## "</span><span class="token token punctuation">}</span><span class="token token punctuation">;</span><span></span><span class="token token punctuation">{</span><span>printf "\033
</span></span><span>
</span><span>---
</span><span>
</span><span><span></span><span class="token token">## Summary: TDD Checklist for Rakuten Symphony Project</span><span>
</span></span><span>
</span><span><span></span><span class="token token">### Backend TDD Checklist</span><span>
</span></span><span>
</span><span>- [ ] Install Ginkgo & Gomega
</span><span>- [ ] Write failing tests FIRST for each function
</span><span>- [ ] Use table-driven tests for multiple scenarios
</span><span>- [ ] Mock database for service layer tests
</span><span><span>- [ ] Integration tests with real Postgres </span><span class="token token punctuation">(</span><span>Docker</span><span class="token token punctuation">)</span><span>
</span></span><span>- [ ] Aim for 80%+ code coverage
</span><span>- [ ] Run `ginkgo watch` during development
</span><span>
</span><span><span></span><span class="token token">### Frontend TDD Checklist</span><span>
</span></span><span>
</span><span>- [ ] Install Jest & React Testing Library
</span><span>- [ ] Write failing tests FIRST for each component
</span><span>- [ ] Use userEvent for user interactions
</span><span><span>- [ ] Mock API calls with jest.mock</span><span class="token token punctuation">(</span><span class="token token punctuation">)</span><span>
</span></span><span>- [ ] Test error states and edge cases
</span><span><span>- [ ] Query by accessibility </span><span class="token token punctuation">(</span><span>role, label</span><span class="token token punctuation">)</span><span>
</span></span><span>- [ ] Aim for 80%+ code coverage
</span><span>- [ ] Run `npm test -- --watch` during development
</span><span>
</span><span><span></span><span class="token token">### Integration TDD Checklist</span><span>
</span></span><span>
</span><span><span>- [ ] Test complete user flows </span><span class="token token punctuation">(</span><span>signup → signin → profile</span><span class="token token punctuation">)</span><span>
</span></span><span>- [ ] Test API endpoints with real HTTP calls
</span><span>- [ ] Test database persistence with test database
</span><span>- [ ] Test authentication flow end-to-end
</span><span>- [ ] Test error handling at all layers
</span><span>
</span><span>---
</span><span>
</span><span>This comprehensive TDD guide ensures you build a robust, well-tested authentication application that demonstrates professional development practices to Rakuten Symphony reviewers. The Red-Green-Refactor cycle keeps you focused, tests serve as documentation, and high coverage gives confidence that your code works correctly.
</span><span>
</span><span>Would you like me to generate the complete test files for your project structure?
</span><span></span></code></span></div></div></div></pre>

1. [https://www.browserstack.com/guide/ginkgo-testing-framework](https://www.browserstack.com/guide/ginkgo-testing-framework)
2. [https://testkube.io/blog/maximize-app-performance-in-kubernetes-with-ginkgo-and-testkube](https://testkube.io/blog/maximize-app-performance-in-kubernetes-with-ginkgo-and-testkube)
3. [https://github.com/kubernetes-sigs/kubebuilder/issues/4424](https://github.com/kubernetes-sigs/kubebuilder/issues/4424)
4. [https://www.lambdatest.com/automation-testing-advisor/golang/methods/ginkgo.DescribeTable](https://www.lambdatest.com/automation-testing-advisor/golang/methods/ginkgo.DescribeTable)
5. [https://dev.to/calvinmclean/test-driven-api-development-in-go-1fb8](https://dev.to/calvinmclean/test-driven-api-development-in-go-1fb8)
6. [https://dev.to/sahilverma_dev/introduction-to-testing-in-react-with-typescript-5edd](https://dev.to/sahilverma_dev/introduction-to-testing-in-react-with-typescript-5edd)
7. [https://trio.dev/mastering-tdd-in-react/](https://trio.dev/mastering-tdd-in-react/)
8. [https://www.qatouch.com/blog/react-testing-libraries/](https://www.qatouch.com/blog/react-testing-libraries/)
9. [https://raygun.com/blog/javascript-unit-testing-frameworks/](https://raygun.com/blog/javascript-unit-testing-frameworks/)
10. [https://testing-library.com/docs/react-testing-library/intro/](https://testing-library.com/docs/react-testing-library/intro/)
11. [https://betterstack.com/community/guides/scaling-nodejs/vitest-vs-jest/](https://betterstack.com/community/guides/scaling-nodejs/vitest-vs-jest/)
12. [https://www.divotion.com/blog/why-vitest-might-be-better-than-jest-for-your-javascript-projects](https://www.divotion.com/blog/why-vitest-might-be-better-than-jest-for-your-javascript-projects)
13. [https://www.speakeasy.com/blog/vitest-vs-jest](https://www.speakeasy.com/blog/vitest-vs-jest)
14. [https://www.kubernetes.dev/blog/2023/04/12/e2e-testing-best-practices-reloaded/](https://www.kubernetes.dev/blog/2023/04/12/e2e-testing-best-practices-reloaded/)
15. [https://www.loadmill.com/blog/tdd-for-api-development/](https://www.loadmill.com/blog/tdd-for-api-development/)
16. [https://www.xenonstack.com/blog/test-driven-development-golang](https://www.xenonstack.com/blog/test-driven-development-golang)
17. [https://moldstud.com/articles/p-unit-testing-in-go-best-tools-and-strategies-for-success](https://moldstud.com/articles/p-unit-testing-in-go-best-tools-and-strategies-for-success)
18. [https://monoscope.tech/blog/best-golang-api-testing/](https://monoscope.tech/blog/best-golang-api-testing/)
19. [https://speedscale.com/blog/golang-testing-frameworks-for-every-type-of-test/](https://speedscale.com/blog/golang-testing-frameworks-for-every-type-of-test/)
20. [https://semaphore.io/community/tutorials/building-and-testing-a-rest-api-in-go-with-gorilla-mux-and-postgresql](https://semaphore.io/community/tutorials/building-and-testing-a-rest-api-in-go-with-gorilla-mux-and-postgresql)
21. [https://pragprog.com/titles/tbreact2/test-driven-react-second-edition/](https://pragprog.com/titles/tbreact2/test-driven-react-second-edition/)
22. [https://blog.stackademic.com/test-driven-development-tdd-in-go-building-reliable-and-maintainable-code-2de56de8699b](https://blog.stackademic.com/test-driven-development-tdd-in-go-building-reliable-and-maintainable-code-2de56de8699b)
23. [https://www.reddit.com/r/golang/comments/1azj63h/ginkgo_gomega/](https://www.reddit.com/r/golang/comments/1azj63h/ginkgo_gomega/)
24. [https://gitnation.com/react-testing-library](https://gitnation.com/react-testing-library)
25. [https://www.sitepoint.com/api-client-tdd-mocked-responses/](https://www.sitepoint.com/api-client-tdd-mocked-responses/)
26. [https://www.reddit.com/r/csharp/comments/qfl231/good_resources_for_net_api_tdd/](https://www.reddit.com/r/csharp/comments/qfl231/good_resources_for_net_api_tdd/)
27. [https://stackoverflow.com/questions/2143725/bdd-tdd-mocking-data-the-tricky-way](https://stackoverflow.com/questions/2143725/bdd-tdd-mocking-data-the-tricky-way)
28. [https://github.com/vitest-dev/vitest/discussions/6098](https://github.com/vitest-dev/vitest/discussions/6098)
29. [https://onsi.github.io/ginkgo/](https://onsi.github.io/ginkgo/)
30. [https://www.claudecode101.com/en/tutorial/workflows/test-driven](https://www.claudecode101.com/en/tutorial/workflows/test-driven)
31. [https://www.red-gate.com/simple-talk/development/dotnet-development/a-tdd-journey-3-mocks-vs-stubs-test-frameworks-assertions-resharper-accelerators/](https://www.red-gate.com/simple-talk/development/dotnet-development/a-tdd-journey-3-mocks-vs-stubs-test-frameworks-assertions-resharper-accelerators/)
32. [https://dev.to/neophen/vitest-is-fast-jest-is-faster--ln1](https://dev.to/neophen/vitest-is-fast-jest-is-faster--ln1)
33. [https://github.com/onsi/ginkgo/issues/378](https://github.com/onsi/ginkgo/issues/378)
34. [https://laravel.io/articles/building-an-api-using-tdd-in-laravel](https://laravel.io/articles/building-an-api-using-tdd-in-laravel)
35. [https://www.reddit.com/r/nextjs/comments/1egfg7m/is_vitest_faster_than_jest_and_can_i_use_it_for/](https://www.reddit.com/r/nextjs/comments/1egfg7m/is_vitest_faster_than_jest_and_can_i_use_it_for/)
36. [https://devot.team/blog/api-testing-architecture](https://devot.team/blog/api-testing-architecture)
37. [https://makersden.io/blog/testing-with-vitest-vs-jest](https://makersden.io/blog/testing-with-vitest-vs-jest)
